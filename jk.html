<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="description" content="">
		<title>may test</title>
		<link href="https://google-developers.appspot.com/maps/documentation/javascript/examples/default.css" rel="stylesheet">	
		<link href="css/jk.css" rel="stylesheet">
		
		<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&libraries=places"></script>	
		<script src="js/jquery-1.10.2.min.js"></script>
		
	</head>
	<body>
		<div id="map">
		</div>
		<script>
			//dummy region JSON data
			var region ={
					'name' : 'Hunter Valley',
					'latitude' : -32.700000,
					'longtitude' : 151.266700
				}
			
			
			
			
			//dummy wineries JSON data
			var wineries = [
				{ 
					"name": "Hunterwine", 
					"location": [
							{
								"address": "hv road 2",
								"region": "Hunter Valley"
							}
					],
					"wine": "white red"
				},
				{
					"name": "Sydney Empire",
					"location": [
							{
								"address": "William Street",
								"region": "Sydney"
							}
					],
					"wine": "red"
				},
				{
					"name": "Freddy Intern",
					"location": [
							{
								"address": "Hurstville way",
								"region": "Hurstville"
							}
					],
					"wine": "white"
				},
				{
					"name": "Jack Intern",
					"location": [
							{
								"address": "Eastwood way",
								"region": "Eastwood"
							}
					],
					"wine": "white"
				},
				{
					"name": "Henry Wine",
					"location": [
							{
								"address": "Maroubra Road",
								"region": "Maroubra"
							}
					],
					"wine": "white red"
				}
			];
			
			$("#form").on("submit", function(event) {
				
				event.preventDefault();
				$("#results").html("");
				
				var search = document.getElementById("name").value;
				var region = document.getElementById("region").value;
				var address = document.getElementById("address").value;
				var wine = document.getElementById("wine").value;
				
				var results = new Array();
				results.push({winery: wineries[0], score: 1});
				results.push({winery: wineries[1], score: 2});
				results.push({winery: wineries[2], score: 3});
				results.push({winery: wineries[3], score: 4});

				for(var i=0;i<results.length;i++) {
					
					$("#results").append("<p>" + results[i].winery.name + "</p>");
				}

				$("#results").append("<br><br><br>");

				results.sort(function(a,b) {
					
					return b.score - a.score;
				});
				
				for(var i=0;i<results.length;i++) {
					
					$("#results").append("<p>" + results[i].winery.name + "</p>");
				}
				/*
				for(var i=0;i<wineries.length;i++) {

					var currentWinery = wineries[i];
					var found = true;
					var rank = 0;
					
					if(search != "") {
						
						if(wineries[i].name.indexOf(search) != -1) {
							rank++;
						} else {
							found = false;
						}	
					}

					if((region != "") && (found)) {
						
						if(wineries[i].location[0].address.indexOf(address) != -1) {
							rank++;
						} else {
							found = false;
						}
					}

					if((address != "") && (found)) {
						if(wineries[i].location[0].region.indexOf(region) != -1) {
							rank++;
						} else {
							found = false;
						}
					}

					if((wine != "") && (found)) {

						if(wineries[i].name.indexOf(wine) != -1) {
							rank++;
						} else {
							found = false;
						}		
					}

					if(found) {
						if(rank == 0) {
							rank = 4;
						}
						results.push({winery: wineries[i], score: rank});
					}
				}*/
			});
		</script>
		<script src="js/jk.js"></script>
		<script>
			createMap(region,document.getElementById('map'));
			drawCenterMarker(region);
		</script>
	</body>
</html>
